# Ruff

YouQu 默认使用 Python 最强代码检查&格式化工具——Ruff。

![](/指南/框架必备/ruff-1.png)

## 安装

```shell
pip3 install ruff
```

## 代码检查

代码检查是扫描代码中存在的问题。

```shell
ruff check .
```

表示扫描当前目录下所有的代码，当然你可以指定一个具体的目录或文件。

![](/指南/框架必备/ruff-2.png)

在扫描日志最后可以看到一个 `fixable`，意思是可以通过 `--fix` 参数直接给你修复掉。

```shell
ruff check setting/ --fix
```

对比下文件前后：

![](/指南/框架必备/ruff-3.png)

你看，直接修复了对吧。

## 代码格式化

经过前面代码检查并修复之后，说明我们代码中没有“问题”了，接下来就可以进行代码格式化。

```shell
ruff format setting/
```

![](/指南/框架必备/ruff-4.png)

效果很不错对吧。

格式化这块 Ruff 官方表示是可以直接替代 Black 的。

## 配置

前面代码检查的时候报了一个问题，是说在 `__init__.py` 文件里面写了一个导入，但没有被使用。

但是这是我特意这样写的，是一种名称空间的设计，可以在 `setting` 名称空间下直接导入，不需要 Ruff 处理这个问题，这也不是个问题。

因此，我们需要对 Ruff 进行配置。

在根目录下 `ruff.toml` 的文件：

```toml
<!--@include: ../../../ruff.toml-->
```

在上面配置文件中 `ignore = []` 写入错误代码：

```toml
ignore = ["F401"]
```

再次扫描就不会再报之前的问题。

其他的一些配置也可以根据自己的一些需要进行配置。
